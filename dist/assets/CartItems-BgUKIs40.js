import{u as la,j as a,M as A,R as S,C as g,I as oa,w as na,o as xa,h as ka,a as L,B as v,r as l,b as da,F as w,S as ta,c as Pa,L as ba,d as Q,H as fa,e as Ma,f as Z,g as wa,i as va}from"./index-v649iEUW.js";const Ra=({show:i,onHide:o,paymentDetails:d})=>{const{userName:h,userEmail:j,cartItems:s,grandTotal:p,referenceNumber:N}=d,e=la(),x=(p/100).toFixed(2),k=()=>{o(),e("/")};return a.jsx(A,{show:i,onHide:o,centered:!0,className:"paymentConfirmModal",children:a.jsxs(A.Body,{className:"paymentconfirmbody",children:[a.jsx("h4",{className:"text-center ptcText pb-4",children:"Your order has been confirmed!"}),a.jsx(S,{className:"mb-4",style:{borderBottom:"2px solid #000",padding:"2px 0"},children:a.jsxs(g,{xs:12,children:[a.jsxs("p",{className:"paymentUserInfo",children:[a.jsx("strong",{className:"paymentUserDetails me-2",children:"Name:"})," ",h||"Guest"]}),a.jsxs("p",{className:"paymentUserInfo",children:[a.jsx("strong",{className:"paymentUserDetails me-2",children:"Reference number:"})," ",N]}),a.jsxs("p",{className:"paymentUserInfo",children:[a.jsx("strong",{className:"paymentUserDetails me-2",children:"Email:"})," ",j||"Not provided"]})]})}),s.map((c,C)=>{var P,B;return a.jsx("div",{className:"mb-3",style:{borderBottom:"2px solid #000",padding:"2px 0"},children:a.jsxs(S,{children:[a.jsxs(g,{xs:8,children:[a.jsx("h6",{className:"pcName",children:(P=c==null?void 0:c.product)==null?void 0:P.name}),a.jsxs("p",{className:"pcSizeQty",children:["Size: ",(B=c==null?void 0:c.product_variant)==null?void 0:B.variant_size,"   |   Qty: ",c==null?void 0:c.quantity]})]}),a.jsx(g,{xs:4,className:"text-end",children:a.jsx("h6",{className:"pcPrice",children:c==null?void 0:c.price})})]})},C)}),a.jsxs(S,{className:"my-3",children:[a.jsx(g,{xs:8,children:a.jsx("h5",{className:"paymentamountTotal",children:"Amount Paid"})}),a.jsx(g,{xs:4,className:"text-end",children:a.jsxs("h5",{className:"paymentamountTotal",children:["₹",x]})})]}),a.jsx("div",{className:"my-3 d-flex justify-content-center align-items-center",children:a.jsx("button",{className:"paymentConfirmButton",onClick:k,children:"Return Home"})})]})})},Ta=({show:i,onHide:o,onTryAgain:d})=>a.jsx(A,{show:i,onHide:o,centered:!0,className:"paymentrejectModal",children:a.jsxs(A.Body,{className:"paymentrejectbody",children:[a.jsx("h4",{className:"text-center ptrText pb-4",children:"Payment Unsuccessful"}),a.jsx(S,{children:a.jsx(g,{xs:12,className:"d-flex justify-content-center align-items-center",children:a.jsx("p",{className:"paymentRejectedText text-center",children:"Oops! Your payment didn't go through. Please attempt again."})})}),a.jsxs("div",{className:"my-3 d-flex justify-content-between align-items-center",children:[a.jsx("button",{className:"paymentRejectedButton trButton",onClick:o,children:"Cancel"}),a.jsx("button",{className:"paymentRejectedButton",onClick:d,children:"Try Again"})]})]})}),Ca=({show:i,onHide:o,selectedId:d,addresses:h,handleAddressChange:j})=>{const s=la(),p=e=>{switch(e){case"Home":return ka;case"Work":return na;case"Others":return xa;default:return na}},N=()=>{s("/profile/address",{state:{fromModal:!0}})};return a.jsx(A,{show:i,onHide:o,className:"addressChangeModal",children:a.jsxs("div",{className:"addressChangeModalContainer",children:[a.jsx("div",{className:"d-flex justify-content-center align-items-center",children:a.jsx("p",{className:"cdaText text-center",children:"Choose a delivery address"})}),h.map(e=>a.jsxs("div",{className:`d-flex justify-content-start align-items-center py-3 px-2 w-100 choosenCatInfoContainer 
            ${d===e.ID?"selected-address":""}`,onClick:()=>j(e),children:[a.jsx(oa,{src:p(e.category),className:"choosenCatIcon",alt:e.category}),a.jsxs("div",{className:"d-flex flex-column mx-2",children:[a.jsx("p",{className:"choosenCatText m-0 p-0",children:e.category}),a.jsx("p",{className:"choosenCatInfo m-0 p-0",children:`${e.line1}, ${e.line2}, ${e.pincode}, ${e.state}, ${e.country}`})]})]},e.ID)),a.jsx(A.Footer,{className:"d-flex justify-content-center align-items-center",children:a.jsx("button",{className:"addnewaddressbutton",onClick:N,children:"+Add New Address"})})]})})},Aa=async(i,o,d)=>{try{return await L.put(`https://dhya.one/hht/merchant/cart/${i}`,o,{headers:{Authorization:`Bearer ${d}`}})}catch{throw new Error("Failed to update cart. Please try again.")}},Ba=async(i,o)=>{try{return await L.post("https://dhya.one/hht/merchant/order/placeorder",i,{headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"}})}catch{throw new Error("Failed to place order. Please try again.")}},Ka=async(i,o,d,h,j,s,p,N,e,x,k,c,C)=>{try{const P={order_id:o.ID,razorpay_order_id:i.razorpay_order_id,razorpay_payment_id:i.razorpay_payment_id,razorpay_signature:i.razorpay_signature};if((await L.post("https://dhya.one/hht/merchant/payment/paymentsuccess",P,{headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json"}})).data.status==="success")v.success("Payment successful!"),c({userName:h==null?void 0:h.display_name,userEmail:j,userPhone:s,cartItems:p,grandTotal:N,referenceNumber:i.razorpay_payment_id}),e(!1),k(!0),x(!1),window.scrollTo(0,0);else throw new Error("Payment success API failed.")}catch(P){console.error("Error in calling payment success API:",P),v.error("Failed to confirm payment. Please try again.")}finally{C(!1)}},Da=async(i,o,d,h,j)=>{try{const s={order_id:i.ID};await L.post("https://dhya.one/hht/merchant/payment/paymentfailed",s,{headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"}}),v.error("Payment failed. Please try again."),d(!0),h(!0),window.scrollTo(0,0)}catch(s){console.error("Error in calling payment failure API:",s),v.error("Failed to handle payment failure.")}finally{j(!1)}},za=async(i,o,d,h,j,s,p,N,e,x,k,c,C,P,B,V,D)=>{const b=String(o.razorpay_order_id),E=String(o.currency||"INR"),y=j.find(m=>m.ID===s);if(!await i()){v.error("Failed to load Razorpay SDK. Please try again later."),D(!1);return}const q={key:d,amount:h,currency:E,name:"HHT Entertainment",description:"Purchase Description",image:"https://hiphoptamizha.com/assets/hhtlogo-C5v3yLtg.png",order_id:b,handler:async m=>{await Ka(m,o,p,e,x,k,N,h,c,C,P,B,D)},prefill:{name:(e==null?void 0:e.display_name)||"NA",email:x||"NA",contact:k||"NA"},notes:{address:`${(y==null?void 0:y.line1)||"NA"}, ${(y==null?void 0:y.line2)||"NA"}, ${y.city||"NA"}, ${y.state||"NA"}, ${y.country||"NA"}`,phone:k||"NA",cart_items:N.map(m=>{var K,u;return`${(K=m==null?void 0:m.product)==null?void 0:K.name}, Size: ${(u=m==null?void 0:m.product_variant)==null?void 0:u.variant_size}, Qty: ${m==null?void 0:m.quantity}`}).join(", ")},theme:{color:"#3399cc"},modal:{ondismiss:async()=>{D(!1),await Da(o,p,c,C,D)}}},F=new window.Razorpay(q);F.on("payment.failed",async m=>{}),F.open()},_a=["Faridabad","Gurgaon","Hisar","Rohtak","Panipat","Karnal","Sonipat","Yamunanagar","Panchkula","Bhiwani","Bahadurgarh","Jind","Sirsa","Thanesar","Kaithal","Palwal","Rewari","Hansi","Narnaul","Fatehabad","Gohana","Tohana","Narwana","Mandi Dabwali","Charkhi Dadri","Shahbad","Pehowa","Samalkha","Pinjore","Ladwa","Sohna","Safidon","Taraori","Mahendragarh","Ratia","Rania","Sarsod"],La=["Dhanbad","Ranchi","Jamshedpur","Bokaro Steel City","Deoghar","Phusro","Adityapur","Hazaribag","Giridih","Ramgarh","Jhumri Tilaiya","Saunda","Sahibganj","Medininagar (Daltonganj)","Chaibasa","Chatra","Gumia","Dumka","Madhupur","Chirkunda","Pakaur","Simdega","Musabani","Mihijam","Patratu","Lohardaga","Tenu dam-cum-Kathhara"],Ua=["Aizawl","Lunglei","Saiha"],Va=["Dimapur","Kohima","Zunheboto","Tuensang","Wokha","Mokokchung"],Fa=["Agartala","Udaipur","Dharmanagar","Pratapgarh","Kailasahar","Belonia","Khowai"],$a=["Ludhiana","Patiala","Amritsar","Jalandhar","Bathinda","Pathankot","Hoshiarpur","Batala","Moga","Malerkotla","Khanna","Mohali","Barnala","Firozpur","Phagwara","Kapurthala","Zirakpur","Kot Kapura","Faridkot","Muktsar","Rajpura","Sangrur","Fazilka","Gurdaspur","Kharar","Gobindgarh","Mansa","Malout","Nabha","Tarn Taran","Jagraon","Sunam","Dhuri","Firozpur Cantt.","Sirhind Fatehgarh Sahib","Rupnagar","Jalandhar Cantt.","Samana","Nawanshahr","Rampura Phul","Nangal","Nakodar","Zira","Patti","Raikot","Longowal","Urmar Tanda","Morinda, India","Phillaur","Pattran","Qadian","Sujanpur","Mukerian","Talwara"],Ea=["Chandigarh"],Ia=["Jaipur","Jodhpur","Bikaner","Udaipur","Ajmer","Bhilwara","Alwar","Bharatpur","Pali","Barmer","Sikar","Tonk","Sadulpur","Sawai Madhopur","Nagaur","Makrana","Sujangarh","Sardarshahar","Ladnu","Ratangarh","Nokha","Nimbahera","Suratgarh","Rajsamand","Lachhmangarh","Rajgarh (Churu)","Nasirabad","Nohar","Phalodi","Nathdwara","Pilani","Merta City","Sojat","Neem-Ka-Thana","Sirohi","Pratapgarh","Rawatbhata","Sangaria","Lalsot","Pilibanga","Pipar City","Taranagar","Vijainagar, Ajmer","Sumerpur","Sagwara","Ramganj Mandi","Lakheri","Udaipurwati","Losal","Sri Madhopur","Ramngarh","Rawatsar","Rajakhera","Shahpura","Shahpura","Raisinghnagar","Malpura","Nadbai","Sanchore","Nagar","Rajgarh (Alwar)","Sheoganj","Sadri","Todaraisingh","Todabhim","Reengus","Rajaldesar","Sadulshahar","Sambhar","Prantij","Mount Abu","Mangrol","Phulera","Mandawa","Pindwara","Mandalgarh","Takhatgarh"],Ga=["Guwahati","Silchar","Dibrugarh","Nagaon","Tinsukia","Jorhat","Bongaigaon City","Dhubri","Diphu","North Lakhimpur","Tezpur","Karimganj","Sibsagar","Goalpara","Barpeta","Lanka","Lumding","Mankachar","Nalbari","Rangia","Margherita","Mangaldoi","Silapathar","Mariani","Marigaon"],Ha=["Bhubaneswar","Cuttack","Raurkela","Brahmapur","Sambalpur","Puri","Baleshwar Town","Baripada Town","Bhadrak","Balangir","Jharsuguda","Bargarh","Paradip","Bhawanipatna","Dhenkanal","Barbil","Kendujhar","Sunabeda","Rayagada","Jatani","Byasanagar","Kendrapara","Rajagangapur","Parlakhemundi","Talcher","Sundargarh","Phulabani","Pattamundai","Titlagarh","Nabarangapur","Soro","Malkangiri","Rairangpur","Tarbha"],qa=["Raipur","Bhilai Nagar","Korba","Bilaspur","Durg","Rajnandgaon","Jagdalpur","Raigarh","Ambikapur","Mahasamund","Dhamtari","Chirmiri","Bhatapara","Dalli-Rajhara","Naila Janjgir","Tilda Newra","Mungeli","Manendragarh","Sakti"],Ja=["Bengaluru","Hubli-Dharwad","Belagavi","Mangaluru","Davanagere","Ballari","Mysore","Tumkur","Shivamogga","Raayachuru","Robertson Pet","Kolar","Mandya","Udupi","Chikkamagaluru","Karwar","Ranebennuru","Ranibennur","Ramanagaram","Gokak","Yadgir","Rabkavi Banhatti","Shahabad","Sirsi","Sindhnur","Tiptur","Arsikere","Nanjangud","Sagara","Sira","Puttur","Athni","Mulbagal","Surapura","Siruguppa","Mudhol","Sidlaghatta","Shahpur","Saundatti-Yellamma","Wadi","Manvi","Nelamangala","Lakshmeshwar","Ramdurg","Nargund","Tarikere","Malavalli","Savanur","Lingsugur","Vijayapura","Sankeshwara","Madikeri","Talikota","Sedam","Shikaripur","Mahalingapura","Mudalagi","Muddebihal","Pavagada","Malur","Sindhagi","Sanduru","Afzalpur","Maddur","Madhugiri","Tekkalakote","Terdal","Mudabidri","Magadi","Navalgund","Shiggaon","Shrirangapattana","Sindagi","Sakaleshapura","Srinivaspur","Ron","Mundargi","Sadalagi","Piriyapatna","Adyar"],Wa=["Imphal","Thoubal","Lilong","Mayang Imphal"],Oa=["Thiruvananthapuram","Kochi","Kozhikode","Kollam","Thrissur","Palakkad","Alappuzha","Malappuram","Ponnani","Vatakara","Kanhangad","Taliparamba","Koyilandy","Neyyattinkara","Kayamkulam","Nedumangad","Kannur","Tirur","Kottayam","Kasaragod","Kunnamkulam","Ottappalam","Thiruvalla","Thodupuzha","Chalakudy","Changanassery","Punalur","Nilambur","Cherthala","Perinthalmanna","Mattannur","Shoranur","Varkala","Paravoor","Pathanamthitta","Peringathur","Attingal","Kodungallur","Pappinisseri","Chittur-Thathamangalam","Muvattupuzha","Adoor","Mavelikkara","Mavoor","Perumbavoor","Vaikom","Palai","Panniyannur","Guruvayoor","Puthuppally","Panamattom"],Ya=["Delhi","New Delhi"],Qa=["Pondicherry","Karaikal","Yanam","Mahe"],Za=["Dehradun","Hardwar","Haldwani-cum-Kathgodam","Srinagar","Kashipur","Roorkee","Rudrapur","Rishikesh","Ramnagar","Pithoragarh","Manglaur","Nainital","Mussoorie","Tehri","Pauri","Nagla","Sitarganj","Bageshwar"],Xa=["Patna","Gaya","Bhagalpur","Muzaffarpur","Darbhanga","Arrah","Begusarai","Chhapra","Katihar","Munger","Purnia","Saharsa","Sasaram","Hajipur","Dehri-on-Sone","Bettiah","Motihari","Bagaha","Siwan","Kishanganj","Jamalpur","Buxar","Jehanabad","Aurangabad","Lakhisarai","Nawada","Jamui","Sitamarhi","Araria","Gopalganj","Madhubani","Masaurhi","Samastipur","Mokameh","Supaul","Dumraon","Arwal","Forbesganj","BhabUrban Agglomeration","Narkatiaganj","Naugachhia","Madhepura","Sheikhpura","Sultanganj","Raxaul Bazar","Ramnagar","Mahnar Bazar","Warisaliganj","Revelganj","Rajgir","Sonepur","Sherghati","Sugauli","Makhdumpur","Maner","Rosera","Nokha","Piro","Rafiganj","Marhaura","Mirganj","Lalganj","Murliganj","Motipur","Manihari","Sheohar","Maharajganj","Silao","Barh","Asarganj"],ar=["Ahmedabad","Surat","Vadodara","Rajkot","Bhavnagar","Jamnagar","Nadiad","Porbandar","Anand","Morvi","Mahesana","Bharuch","Vapi","Navsari","Veraval","Bhuj","Godhra","Palanpur","Valsad","Patan","Deesa","Amreli","Anjar","Dhoraji","Khambhat","Mahuva","Keshod","Wadhwan","Ankleshwar","Savarkundla","Kadi","Visnagar","Upleta","Una","Sidhpur","Unjha","Mangrol","Viramgam","Modasa","Palitana","Petlad","Kapadvanj","Sihor","Wankaner","Limbdi","Mandvi","Thangadh","Vyara","Padra","Lunawada","Rajpipla","Vapi","Umreth","Sanand","Rajula","Radhanpur","Mahemdabad","Ranavav","Tharad","Mansa","Umbergaon","Talaja","Vadnagar","Manavadar","Salaya","Vijapur","Pardi","Rapar","Songadh","Lathi","Adalaj","Chhapra","Gandhinagar"],rr=["Hyderabad","Warangal","Nizamabad","Karimnagar","Ramagundam","Khammam","Mahbubnagar","Mancherial","Adilabad","Suryapet","Jagtial","Miryalaguda","Nirmal","Kamareddy","Kothagudem","Bodhan","Palwancha","Mandamarri","Koratla","Sircilla","Tandur","Siddipet","Wanaparthy","Kagaznagar","Gadwal","Sangareddy","Bellampalle","Bhongir","Vikarabad","Jangaon","Bhadrachalam","Bhainsa","Farooqnagar","Medak","Narayanpet","Sadasivpet","Yellandu","Manuguru","Kyathampalle","Nagarkurnool"],er=["Shillong","Tura","Nongstoin"],nr=["Mumbai","Pune","Nagpur","Thane","Nashik","Kalyan-Dombivali","Vasai-Virar","Solapur","Mira-Bhayandar","Bhiwandi","Amravati","Nanded-Waghala","Sangli","Malegaon","Akola","Latur","Dhule","Ahmednagar","Ichalkaranji","Parbhani","Panvel","Yavatmal","Achalpur","Osmanabad","Nandurbar","Satara","Wardha","Udgir","Aurangabad","Amalner","Akot","Pandharpur","Shrirampur","Parli","Washim","Ambejogai","Manmad","Ratnagiri","Uran Islampur","Pusad","Sangamner","Shirpur-Warwade","Malkapur","Wani","Lonavla","Talegaon Dabhade","Anjangaon","Umred","Palghar","Shegaon","Ozar","Phaltan","Yevla","Shahade","Vita","Umarkhed","Warora","Pachora","Tumsar","Manjlegaon","Sillod","Arvi","Nandura","Vaijapur","Wadgaon Road","Sailu","Murtijapur","Tasgaon","Mehkar","Yawal","Pulgaon","Nilanga","Wai","Umarga","Paithan","Rahuri","Nawapur","Tuljapur","Morshi","Purna","Satana","Pathri","Sinnar","Uchgaon","Uran","Pen","Karjat","Manwath","Partur","Sangole","Mangrulpir","Risod","Shirur","Savner","Sasvad","Pandharkaoda","Talode","Shrigonda","Shirdi","Raver","Mukhed","Rajura","Vadgaon Kasba","Tirora","Mahad","Lonar","Sawantwadi","Pathardi","Pauni","Ramtek","Mul","Soyagaon","Mangalvedhe","Narkhed","Shendurjana","Patur","Mhaswad","Loha","Nandgaon","Warud"],tr=["Marmagao","Panaji","Margao","Mapusa"],ia={"Andaman and Nicobar Islands":["Port Blair"],Haryana:_a,"Tamil Nadu":["Chennai","Coimbatore","Madurai","Tiruchirappalli","Salem","Tirunelveli","Tiruppur","Ranipet","Nagercoil","Thanjavur","Vellore","Kancheepuram","Erode","Tiruvannamalai","Pollachi","Rajapalayam","Sivakasi","Pudukkottai","Neyveli (TS)","Nagapattinam","Viluppuram","Tiruchengode","Vaniyambadi","Theni Allinagaram","Udhagamandalam","Aruppukkottai","Paramakudi","Arakkonam","Virudhachalam","Srivilliputhur","Tindivanam","Virudhunagar","Karur","Valparai","Sankarankovil","Tenkasi","Palani","Pattukkottai","Tirupathur","Ramanathapuram","Udumalaipettai","Gobichettipalayam","Thiruvarur","Thiruvallur","Panruti","Namakkal","Thirumangalam","Vikramasingapuram","Nellikuppam","Rasipuram","Tiruttani","Nandivaram-Guduvancheri","Periyakulam","Pernampattu","Vellakoil","Sivaganga","Vadalur","Rameshwaram","Tiruvethipuram","Perambalur","Usilampatti","Vedaranyam","Sathyamangalam","Puliyankudi","Nanjikottai","Thuraiyur","Sirkali","Tiruchendur","Periyasemur","Sattur","Vandavasi","Tharamangalam","Tirukkoyilur","Oddanchatram","Palladam","Vadakkuvalliyur","Tirukalukundram","Uthamapalayam","Surandai","Sankari","Shenkottai","Vadipatti","Sholingur","Tirupathur","Manachanallur","Viswanatham","Polur","Panagudi","Uthiramerur","Thiruthuraipoondi","Pallapatti","Ponneri","Lalgudi","Natham","Unnamalaikadai","P.N.Patti","Tharangambadi","Tittakudi","Pacode","O' Valley","Suriyampalayam","Sholavandan","Thammampatti","Namagiripettai","Peravurani","Parangipettai","Pudupattinam","Pallikonda","Sivagiri","Punjaipugalur","Padmanabhapuram","Thirupuvanam"],"Madhya Pradesh":["Indore","Bhopal","Jabalpur","Gwalior","Ujjain","Sagar","Ratlam","Satna","Murwara (Katni)","Morena","Singrauli","Rewa","Vidisha","Ganjbasoda","Shivpuri","Mandsaur","Neemuch","Nagda","Itarsi","Sarni","Sehore","Mhow Cantonment","Seoni","Balaghat","Ashok Nagar","Tikamgarh","Shahdol","Pithampur","Alirajpur","Mandla","Sheopur","Shajapur","Panna","Raghogarh-Vijaypur","Sendhwa","Sidhi","Pipariya","Shujalpur","Sironj","Pandhurna","Nowgong","Mandideep","Sihora","Raisen","Lahar","Maihar","Sanawad","Sabalgarh","Umaria","Porsa","Narsinghgarh","Malaj Khand","Sarangpur","Mundi","Nepanagar","Pasan","Mahidpur","Seoni-Malwa","Rehli","Manawar","Rahatgarh","Panagar","Wara Seoni","Tarana","Sausar","Rajgarh","Niwari","Mauganj","Manasa","Nainpur","Prithvipur","Sohagpur","Nowrozabad (Khodargama)","Shamgarh","Maharajpur","Multai","Pali","Pachore","Rau","Mhowgaon","Vijaypur","Narsinghgarh"],Jharkhand:La,Mizoram:Ua,Nagaland:Va,"Himachal Pradesh":["Shimla","Mandi","Solan","Nahan","Sundarnagar","Palampur","Kullu"],Tripura:Fa,"Andhra Pradesh":["Visakhapatnam","Vijayawada","Guntur","Nellore","Kurnool","Rajahmundry","Kakinada","Tirupati","Anantapur","Kadapa","Vizianagaram","Eluru","Ongole","Nandyal","Machilipatnam","Adoni","Tenali","Chittoor","Hindupur","Proddatur","Bhimavaram","Madanapalle","Guntakal","Dharmavaram","Gudivada","Srikakulam","Narasaraopet","Rajampet","Tadpatri","Tadepalligudem","Chilakaluripet","Yemmiganur","Kadiri","Chirala","Anakapalle","Kavali","Palacole","Sullurpeta","Tanuku","Rayachoti","Srikalahasti","Bapatla","Naidupet","Nagari","Gudur","Vinukonda","Narasapuram","Nuzvid","Markapur","Ponnur","Kandukur","Bobbili","Rayadurg","Samalkot","Jaggaiahpet","Tuni","Amalapuram","Bheemunipatnam","Venkatagiri","Sattenapalle","Pithapuram","Palasa Kasibugga","Parvathipuram","Macherla","Gooty","Salur","Mandapeta","Jammalamadugu","Peddapuram","Punganur","Nidadavole","Repalle","Ramachandrapuram","Kovvur","Tiruvuru","Uravakonda","Narsipatnam","Yerraguntla","Pedana","Puttur","Renigunta","Rajam","Srisailam Project (Right Flank Colony) Township"],Punjab:$a,Chandigarh:Ea,Rajasthan:Ia,Assam:Ga,Odisha:Ha,Chhattisgarh:qa,"Jammu and Kashmir":["Srinagar","Jammu","Baramula","Anantnag","Sopore","KathUrban Agglomeration","Rajauri","Punch","Udhampur"],Karnataka:Ja,Manipur:Wa,Kerala:Oa,Delhi:Ya,"Dadra and Nagar Haveli":["Silvassa"],Puducherry:Qa,Uttarakhand:Za,"Uttar Pradesh":["Lucknow","Kanpur","Firozabad","Agra","Meerut","Varanasi","Allahabad","Amroha","Moradabad","Aligarh","Saharanpur","Noida","Loni","Jhansi","Shahjahanpur","Rampur","Modinagar","Hapur","Etawah","Sambhal","Orai","Bahraich","Unnao","Rae Bareli","Lakhimpur","Sitapur","Lalitpur","Pilibhit","Chandausi","Hardoi ","Azamgarh","Khair","Sultanpur","Tanda","Nagina","Shamli","Najibabad","Shikohabad","Sikandrabad","Shahabad, Hardoi","Pilkhuwa","Renukoot","Vrindavan","Ujhani","Laharpur","Tilhar","Sahaswan","Rath","Sherkot","Kalpi","Tundla","Sandila","Nanpara","Sardhana","Nehtaur","Seohara","Padrauna","Mathura","Thakurdwara","Nawabganj","Siana","Noorpur","Sikandra Rao","Puranpur","Rudauli","Thana Bhawan","Palia Kalan","Zaidpur","Nautanwa","Zamania","Shikarpur, Bulandshahr","Naugawan Sadat","Fatehpur Sikri","Shahabad, Rampur","Robertsganj","Utraula","Sadabad","Rasra","Lar","Lal Gopalganj Nindaura","Sirsaganj","Pihani","Shamsabad, Agra","Rudrapur","Soron","SUrban Agglomerationr","Samdhan","Sahjanwa","Rampur Maniharan","Sumerpur","Shahganj","Tulsipur","Tirwaganj","PurqUrban Agglomerationzi","Shamsabad, Farrukhabad","Warhapur","Powayan","Sandi","Achhnera","Naraura","Nakur","Sahaspur","Safipur","Reoti","Sikanderpur","Saidpur","Sirsi","Purwa","Parasi","Lalganj","Phulpur","Shishgarh","Sahawar","Samthar","Pukhrayan","Obra","Niwai","Mirzapur"],Bihar:Xa,Gujarat:ar,Telangana:rr,Meghalaya:er,"Himachal Praddesh":["Manali"],"Arunachal Pradesh":["Naharlagun","Pasighat"],Maharashtra:nr,Goa:tr,"West Bengal":["Kolkata","Siliguri","Asansol","Raghunathganj","Kharagpur","Naihati","English Bazar","Baharampur","Hugli-Chinsurah","Raiganj","Jalpaiguri","Santipur","Balurghat","Medinipur","Habra","Ranaghat","Bankura","Nabadwip","Darjiling","Purulia","Arambagh","Tamluk","AlipurdUrban Agglomerationr","Suri","Jhargram","Gangarampur","Rampurhat","Kalimpong","Sainthia","Taki","Murshidabad","Memari","Paschim Punropara","Tarakeswar","Sonamukhi","PandUrban Agglomeration","Mainaguri","Malda","Panchla","Raghunathpur","Mathabhanga","Monoharpur","Srirampore","Adra"]},sa={control:i=>({...i,borderRadius:"0",fontFamily:'"Neuebold", sans-serif',fontSize:"13px",fontWeight:700,color:"#000",border:"1px solid black",backgroundColor:"#DDDBC6",minHeight:"34px"}),menuList:i=>({...i,maxHeight:"80px",overflowY:"auto"}),menu:i=>({...i,zIndex:10})},ir=({show:i,onHide:o,selectedId:d,addresses:h,handleAddressChange:j,setSelectedAddress:s})=>{const[p,N]=l.useState(!1),[e,x]=l.useState({name:"",contact_no:"",email:"",line1:"",line2:"",landmark:"",city:"",pincode:"",state:"",country:"India",category:"Home"}),[k,c]=l.useState(null),[C,P]=l.useState(null),[B,V]=l.useState([]),{addAddress:D}=da(),[b,E]=l.useState({}),y=Object.keys(ia).map(n=>({value:n,label:n})),I=n=>{c(n),x(T=>({...T,state:n.value}));const R=ia[n.value];V(R.map(T=>({value:T,label:T}))),P(null)},q=n=>{P(n),x(R=>({...R,city:n.value}))},F=[{label:"Receiver's Name",type:"text",placeholder:"Enter name",value:e.name,errorKey:"name",field:"name"},{label:"Contact Number",type:"tel",placeholder:"Enter contact number",value:e.contact_no,errorKey:"contact_no",field:"contact_no"},{label:"Email",type:"email",placeholder:"Enter email",value:e.email,errorKey:"email",field:"email"},{label:"House/Flat/Block No",type:"text",placeholder:"Enter address line 1",value:e.line1,errorKey:"line1",field:"line1"},{label:"Apartment/Road/Area",type:"text",placeholder:"Enter address line 2",value:e.line2,errorKey:"line2",field:"line2"},{label:"Landmark (Optional)",type:"text",placeholder:"Enter landmark",value:e.landmark,field:"landmark"},{label:"Country",type:"text",value:"India",field:"country",disabled:!0}],m=(n,R)=>{x(T=>({...T,[n]:R}))},K=n=>/^[6-9]\d{9}$/.test(n),u=n=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n),U=()=>{let n={};return e.name||(n.name="Receiver's Name is required"),e.contact_no?K(e.contact_no)||(n.contact_no="Enter a valid 10-digit mobile number"):n.contact_no="Contact Number is required",e.email?u(e.email)||(n.email="Enter a valid email address"):n.email="Email is required",e.line1||(n.line1="House/Flat/Block No is required"),e.line2||(n.line2="Apartment/Road/Area is required"),e.state||(n.state="State is required"),e.city||(n.city="City is required"),e.pincode||(n.pincode="Pincode is required"),E(n),Object.keys(n).length===0},$=async()=>{if(U()){N(!0);try{await D(e)?(s(e),j(e),v.success("Address added successfully!"),o()):v.error("Failed to add address. Please try again.")}catch(n){console.error("Error adding address:",n),v.error("An error occurred while adding the address.")}finally{N(!1)}}};return a.jsxs(A,{show:i,onHide:o,className:"guestAddressModal",centered:!0,children:[a.jsx(A.Header,{closeButton:!0,children:a.jsx(A.Title,{className:"anaText",children:"Add New Address"})}),a.jsx(A.Body,{children:a.jsxs(w,{className:"guestmodalForm",children:[F.map(({label:n,type:R,placeholder:T,value:J,errorKey:W,field:G,disabled:O})=>a.jsxs(w.Group,{as:S,controlId:`form-${G}`,className:"mb-3",children:[a.jsx(w.Label,{column:!0,sm:"4",className:"guestlabel",children:n}),a.jsxs(g,{sm:"8",children:[a.jsx(w.Control,{type:R,placeholder:T,value:J,onChange:_=>m(G,_.target.value),isInvalid:!!b[W],disabled:O,className:"guestAddressInput",style:{backgroundColor:"#DDDBC6"}}),b[W]&&a.jsx(w.Control.Feedback,{type:"invalid",children:b[W]})]})]},G)),a.jsxs(w.Group,{as:S,controlId:"formState",className:"mb-3",children:[a.jsx(w.Label,{column:!0,sm:"4",className:"guestlabel",children:"State"}),a.jsxs(g,{sm:"8",children:[a.jsx(ta,{options:y,value:k,onChange:I,styles:sa,placeholder:"Select State"}),b.state&&a.jsx("div",{className:"error-text",children:b.state})]})]}),a.jsxs(w.Group,{as:S,controlId:"formCity",className:"mb-3",children:[a.jsx(w.Label,{column:!0,sm:"4",className:"guestlabel",children:"City"}),a.jsxs(g,{sm:"8",children:[a.jsx(ta,{options:B,value:C,onChange:q,placeholder:"Select City",styles:sa,isDisabled:!k}),b.city&&a.jsx("div",{className:"error-text",children:b.city})]})]}),a.jsxs(w.Group,{as:S,controlId:"formPincode",className:"mb-3",children:[a.jsx(w.Label,{column:!0,sm:"4",className:"guestlabel",children:"Pincode"}),a.jsxs(g,{sm:"8",children:[a.jsx(w.Control,{type:"text",placeholder:"Enter pincode",className:"guestAddressInput",value:e.pincode,onChange:n=>x({...e,pincode:n.target.value}),isInvalid:!!b.pincode}),a.jsx(w.Control.Feedback,{type:"invalid",children:b.pincode})]})]})]})}),a.jsx(A.Footer,{className:"d-flex justify-content-center align-items-center",children:a.jsx("button",{className:"guestnewaddressButton",onClick:$,disabled:p,children:p?"Saving...":"Add Address"})})]})},or=()=>{const{cart:i=[],removeFromCart:o,setCart:d,cartId:h,setCartId:j}=l.useContext(Pa),{userDetails:s}=da(),p=(s==null?void 0:s.addresses)||[],[N,e]=l.useState(!1),[x,k]=l.useState(null),[c,C]=l.useState(null),[P,B]=l.useState(null),[V,D]=l.useState(!1),[b,E]=l.useState({}),[y,I]=l.useState(!1),[q,F]=l.useState(!1),[m,K]=l.useState(!1),[u,U]=l.useState(null),[$,n]=l.useState(null),[R,T]=l.useState(!1),[J,W]=l.useState(localStorage.getItem("access_token")),[G,O]=l.useState(!1);l.useEffect(()=>{(s==null?void 0:s.status)==="guest"?O(!0):O(!1)},[s]),l.useEffect(()=>{if(!h)return;(async()=>{e(!0);try{const t=await L.get(`https://dhya.one/hht/merchant/cart/${h}`,{headers:{Authorization:`Bearer ${J}`}});d(t.data.data.items),console.log("rsp",t.data.data.items)}catch(t){console.error("Error fetching cart data:",t),d([])}finally{e(!1)}})()},[h,J]);const _=l.useMemo(()=>i.reduce((r,t)=>r+t.price*t.quantity,0),[i]);l.useEffect(()=>{if(p.length>0){const r=p.find(t=>t.is_primary);r?(U(r),n(r.ID)):(U(p[0]),n(p[0].ID))}else U(null),n(null)},[p]);const ua=()=>{K(!0),console.log(K)},X=r=>{console.log("Selected address:",r),U(r),n(r.ID),K(!1)},ha=l.useMemo(()=>{var r,t;return((t=(r=s==null?void 0:s.contacts)==null?void 0:r.find(f=>f.contact_type==="email"))==null?void 0:t.contact)||(u==null?void 0:u.email)||""},[s,u==null?void 0:u.email]),ca=l.useMemo(()=>{var r,t;return((t=(r=s==null?void 0:s.contacts)==null?void 0:r.find(f=>f.contact_type==="phone"))==null?void 0:t.contact)||(u==null?void 0:u.contact_no)||""},[s,u==null?void 0:u.contact_no]),ma=()=>new Promise(r=>{const t=document.createElement("script");t.src="https://checkout.razorpay.com/v1/checkout.js",t.onload=()=>{r(!0)},t.onerror=()=>{r(!1)},document.body.appendChild(t)}),pa=async r=>{B(r);try{const t=localStorage.getItem("access_token");await L.delete(`https://dhya.one/hht/merchant/cartItem/${r}`,{headers:{Authorization:`Bearer ${t}`}}),o(r)}catch(t){console.error("Error removing item from cart:",t),alert("Failed to remove the item. Please try again.")}finally{B(null)}},aa=async()=>{var r,t,f,M;if(!u){v.error("Please select an address before proceeding.");return}try{T(!0);const z=localStorage.getItem("access_token"),H=_+(_>0?199:0),ra=await Aa(h,{id:h,total_price:H},z);if(ra.data.status==="success"){const Sa={cart_id:ra.data.data.ID,billing_address_id:$,shipping_address_id:$,shipping_rate:199},ea=await Ba(Sa,z),ja=(t=(r=ea.data)==null?void 0:r.data)==null?void 0:t.order,Na=(M=(f=ea.data)==null?void 0:f.data)==null?void 0:M.razor_key;await za(ma,ja,Na,H*100,p,$,z,i,s,ha,ca,I,F,D,E,d,T)}}catch(z){console.error("Error in payment flow:",z),v.error(z.message),T(!1)}},ga=async r=>{if(r.quantity>=10){v.error("Quantity should not exceed beyond 10.");return}if(r.quantity<r.product_variant.quantity&&r.quantity<10){k(r.ID);try{const t=r.quantity+1,f=localStorage.getItem("access_token");await L.put(`https://dhya.one/hht/merchant/cartItem/${r.ID}`,{ID:r.ID,quantity:t},{headers:{Authorization:`Bearer ${f}`}}),d(i.map(M=>M.ID===r.ID?{...M,quantity:t}:M))}catch(t){console.error("Error updating quantity:",t),alert("Failed to update the quantity. Please try again.")}finally{k(null)}}else v.error(`Cannot add more than ${r.product_variant.quantity} items.`)},ya=async r=>{if(r.quantity>1){C(r.ID);try{const t=r.quantity-1,f=localStorage.getItem("access_token");await L.put(`https://dhya.one/hht/merchant/cartItem/${r.ID}`,{ID:r.ID,quantity:t},{headers:{Authorization:`Bearer ${f}`}}),d(i.map(M=>M.ID===r.ID?{...M,quantity:t}:M))}catch(t){console.error("Error updating quantity:",t),alert("Failed to update the quantity. Please try again.")}finally{C(null)}}else v.error("Quantity cannot be less than 1.")};return N?a.jsx(ba,{}):i.length===0?a.jsx(Q,{fluid:!0,className:"cartContainer",children:a.jsx(S,{className:"d-flex justify-content-center align-items-center my-5",children:a.jsx(g,{className:"d-flex justify-content-center align-items-center",children:a.jsx("p",{className:"npcText",children:"No products in the cart."})})})}):a.jsxs(Q,{fluid:!0,className:"cartContainer",children:[a.jsx(fa,{backgroundColor:"#3EA66B",color:"#F4E003",name:"Cart"}),i.length>0?a.jsxs(Q,{children:[a.jsx(S,{className:"mt-3 d-flex justify-content-center justify-content-sm-end align-items-center",children:a.jsxs(g,{xs:12,className:"addressColumn d-flex justify-content-between align-items-center my-3",children:[a.jsxs("div",{className:"deliverContainer p-0 m-0 w-100",children:[console.log(u),a.jsxs("p",{className:"p-0 m-0 deliverText",children:["Deliver to:  ",u?`${u.category}, ${u.pincode}`:"No address selected"]})]}),a.jsx("div",{className:"changeAddressContainer",children:a.jsx("p",{className:"changeAddressText",onClick:ua,children:u?"Change":"Add"})})]})}),i.map(r=>{var t,f,M,z,H,Y;return a.jsx(Ma.Fragment,{children:a.jsx(S,{className:"my-3 d-flex justify-content-center align-items-center",children:a.jsx(g,{xs:12,className:"cartImageRow",children:a.jsxs(S,{children:[a.jsx(g,{xs:4,lg:3,className:"cartImageColumn",children:a.jsx("div",{className:"cartImageContainer",children:((f=(t=r==null?void 0:r.product)==null?void 0:t.images)==null?void 0:f.length)>0?a.jsx(oa,{fluid:!0,src:r.product.images[0].image_url,alt:"product-image",className:"crtImage"}):null})}),a.jsxs(g,{xs:6,lg:7,className:"cartDetails m-0 p-0",children:[a.jsx("p",{className:"cartprName p-0 m-0",children:(M=r==null?void 0:r.product)==null?void 0:M.name}),a.jsxs("div",{className:"d-flex justify-content-start align-items-center w-100 my-1",children:[a.jsx("div",{className:"ssSizeContainer d-flex align-items-center",children:a.jsxs("p",{className:"m-0 p-0",children:["Size: ",(z=r==null?void 0:r.product_variant)==null?void 0:z.variant_size]})}),a.jsxs("div",{className:"ssSizeContainer d-flex align-items-center",children:[a.jsx("p",{className:"m-0 p-0",children:"Qty"}),a.jsxs("div",{className:"d-flex align-items-center justify-content-between ms-2",children:[a.jsx("p",{className:"m-0 px-1 actionicon",onClick:()=>ya(r),children:c===r.ID?a.jsx(Z,{className:"loadingSpinner"}):"-"}),a.jsx("p",{className:"m-0 px-1",children:r.quantity}),a.jsx("p",{className:"m-0 px-1 actionicon",onClick:()=>ga(r),children:x===r.ID?a.jsx(Z,{className:"loadingSpinner"}):"+"})]})]})]}),a.jsxs("p",{className:"cartprprice p-0 m-0 mt-1 mt-md-3 d-flex justify-content-start align-items-center",children:[a.jsxs("span",{className:"carogprice me-3",children:["₹",(H=r==null?void 0:r.product)==null?void 0:H.base_price]})," ₹",r==null?void 0:r.price]})," ",a.jsx("p",{className:"cartmrptext",children:"MRP incl. of all taxes"}),a.jsxs("p",{className:"cartmrproff",children:[(Y=r==null?void 0:r.product)==null?void 0:Y.discount,"% off"]})," "]}),a.jsx(g,{xs:2,lg:2,className:"cartDetailsIcon d-flex align-items-start justify-content-end",children:P===r.ID?a.jsx(Z,{className:"loadingSpinner"}):a.jsx(wa,{className:"closeIcon",onClick:()=>pa(r.ID)})})]})})})},r.ID)}),a.jsxs(S,{className:"my-4 d-flex justify-content-center align-items-center",children:[a.jsx(g,{xs:12,className:"cartPriceRow",children:a.jsx("h4",{className:"pricedetailtext",children:"Price Details"})}),a.jsxs(g,{xs:12,className:"cartPriceRow",children:[a.jsxs("div",{className:"cartTotalContainer d-flex align-items-center justify-content-between mx-2",children:[a.jsx("p",{children:"Cart Total"}),a.jsxs("p",{children:["₹",_]})]}),a.jsxs("div",{className:"cartTotalContainer d-flex align-items-center justify-content-between mx-2",children:[a.jsx("p",{children:"Shipping Charges"}),a.jsxs("p",{children:["₹",_>0?199:0]})]}),a.jsxs("div",{className:"totalAmountContainer d-flex align-items-center justify-content-between mx-2",children:[a.jsx("p",{children:"Total Amount"}),a.jsxs("p",{children:["₹",_+(_>0?199:0)]})]})]})]}),a.jsx(S,{className:"my-3 d-flex justify-content-center align-items-center",children:a.jsx(g,{xs:12,className:"d-flex justify-content-center align-items-center",children:a.jsx("button",{className:"paymentProductButton",onClick:aa,disabled:R,children:R?a.jsx(va,{animation:"border",size:"sm"}):"Payment"})})}),V&&a.jsx(Ra,{show:V,onHide:()=>{D(!1),d([]),j(null)},paymentDetails:b}),y&&!V&&a.jsx(Ta,{show:y,onHide:()=>{I(!1)},onTryAgain:aa}),m&&(G?a.jsx(ir,{show:m,onHide:()=>K(!1),handleAddressChange:X,setSelectedAddress:U}):a.jsx(Ca,{show:m,onHide:()=>K(!1),selectedId:$,addresses:p,handleAddressChange:X}))]}):null]})};export{or as default};
